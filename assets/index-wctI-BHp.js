!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const e={equals:(e,t)=>e===t};let t=S;const n=1,r=2,s={owned:null,cleanups:null,context:null,owner:null};var l=null;let o=null,i=null,a=null,c=null,u=0;function d(t,n){const r={value:t,observers:null,observerSlots:null,comparator:(n=n?Object.assign({},e,n):e).equals||void 0};return[v.bind(r),e=>("function"==typeof e&&(e=e(r.value)),b(r,e))]}function f(e,t,r){y(m(e,t,!1,n))}function p(t,n,r){r=r?Object.assign({},e,r):e;const s=m(t,n,!0,0);return s.observers=null,s.observerSlots=null,s.comparator=r.equals||void 0,y(s),v.bind(s)}function h(e){if(null===i)return e();const t=i;i=null;try{return e()}finally{i=t}}function g(e){!function(e,r){t=C;const s=m(e,r,!1,n);s.user=!0,c?c.push(s):y(s)}((()=>h(e)))}function v(){if(this.sources&&this.state)if(this.state===n)y(this);else{const e=a;a=null,w((()=>A(this)),!1),a=e}if(i){const e=this.observers?this.observers.length:0;i.sources?(i.sources.push(this),i.sourceSlots.push(e)):(i.sources=[this],i.sourceSlots=[e]),this.observers?(this.observers.push(i),this.observerSlots.push(i.sources.length-1)):(this.observers=[i],this.observerSlots=[i.sources.length-1])}return this.value}function b(e,t,r){let s=e.value;return e.comparator&&e.comparator(s,t)||(e.value=t,e.observers&&e.observers.length&&w((()=>{for(let t=0;t<e.observers.length;t+=1){const r=e.observers[t],s=o&&o.running;s&&o.disposed.has(r),(s?r.tState:r.state)||(r.pure?a.push(r):c.push(r),r.observers&&N(r)),s||(r.state=n)}if(a.length>1e6)throw a=[],new Error}),!1)),t}function y(e){if(!e.fn)return;E(e);const t=u;!function(e,t,r){let s;const o=l,a=i;i=l=e;try{s=e.fn(t)}catch(c){return e.pure&&(e.state=n,e.owned&&e.owned.forEach(E),e.owned=null),e.updatedAt=r+1,D(c)}finally{i=a,l=o}(!e.updatedAt||e.updatedAt<=r)&&(null!=e.updatedAt&&"observers"in e?b(e,s):e.value=s,e.updatedAt=r)}(e,e.value,t)}function m(e,t,r,o=n,i){const a={fn:e,state:o,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:l,context:l?l.context:null,pure:r};return null===l||l!==s&&(l.owned?l.owned.push(a):l.owned=[a]),a}function x(e){if(0===e.state)return;if(e.state===r)return A(e);if(e.suspense&&h(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<u);)e.state&&t.push(e);for(let s=t.length-1;s>=0;s--)if((e=t[s]).state===n)y(e);else if(e.state===r){const n=a;a=null,w((()=>A(e,t[0])),!1),a=n}}function w(e,n){if(a)return e();let r=!1;n||(a=[]),c?r=!0:c=[],u++;try{const n=e();return function(e){a&&(S(a),a=null);if(e)return;const n=c;c=null,n.length&&w((()=>t(n)),!1)}(r),n}catch(s){r||(c=null),a=null,D(s)}}function S(e){for(let t=0;t<e.length;t++)x(e[t])}function C(e){let t,n=0;for(t=0;t<e.length;t++){const r=e[t];r.user?e[n++]=r:x(r)}for(t=0;t<n;t++)x(e[t])}function A(e,t){e.state=0;for(let s=0;s<e.sources.length;s+=1){const l=e.sources[s];if(l.sources){const e=l.state;e===n?l!==t&&(!l.updatedAt||l.updatedAt<u)&&x(l):e===r&&A(l,t)}}}function N(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=r,n.pure?a.push(n):c.push(n),n.observers&&N(n))}}function E(e){let t;if(e.sources)for(;e.sources.length;){const t=e.sources.pop(),n=e.sourceSlots.pop(),r=t.observers;if(r&&r.length){const e=r.pop(),s=t.observerSlots.pop();n<r.length&&(e.sourceSlots[s]=n,r[n]=e,t.observerSlots[n]=s)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)E(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)E(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function D(e,t=l){const n=function(e){return e instanceof Error?e:new Error("string"==typeof e?e:"Unknown error",{cause:e})}(e);throw n}function $(e,t){return h((()=>e(t||{})))}function T(e){const t=e.keyed,n=p((()=>e.when),void 0,void 0),r=t?n:p(n,void 0,{equals:(e,t)=>!e==!t});return p((()=>{const s=r();if(s){const l=e.children;return"function"==typeof l&&l.length>0?h((()=>l(t?s:()=>{if(!h(r))throw`Stale read from <${"Show"}>.`;return n()}))):l}return e.fallback}),void 0,void 0)}const F="_$DX_DELEGATE";function k(e,t,n,r){let s;const l=()=>(s||(s=(()=>{const t=document.createElement("template");return t.innerHTML=e,t.content.firstChild})())).cloneNode(!0);return l.cloneNode=l,l}function I(e,t=window.document){const n=t[F]||(t[F]=new Set);for(let r=0,s=e.length;r<s;r++){const s=e[r];n.has(s)||(n.add(s),t.addEventListener(s,B))}}function O(e,t,n,r){if(void 0===n||r||(r=[]),"function"!=typeof t)return L(e,t,r,n);f((r=>L(e,t(),r,n)),r)}function B(e){let t=e.target;const n=`$$${e.type}`,r=e.target,s=e.currentTarget,l=t=>Object.defineProperty(e,"target",{configurable:!0,value:t}),o=()=>{const r=t[n];if(r&&!t.disabled){const s=t[`${n}Data`];if(void 0!==s?r.call(t,s,e):r.call(t,e),e.cancelBubble)return}return t.host&&"string"!=typeof t.host&&!t.host._$host&&t.contains(e.target)&&l(t.host),!0},i=()=>{for(;o()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get:()=>t||document}),e.composedPath){const n=e.composedPath();l(n[0]);for(let e=0;e<n.length-2&&(t=n[e],o());e++){if(t._$host){t=t._$host,i();break}if(t.parentNode===s)break}}else i();l(r)}function L(e,t,n,r,s){for(;"function"==typeof n;)n=n();if(t===n)return n;const l=typeof t,o=void 0!==r;if(e=o&&n[0]&&n[0].parentNode||e,"string"===l||"number"===l){if("number"===l&&(t=t.toString())===n)return n;if(o){let s=n[0];s&&3===s.nodeType?s.data!==t&&(s.data=t):s=document.createTextNode(t),n=H(e,n,r,s)}else n=""!==n&&"string"==typeof n?e.firstChild.data=t:e.textContent=t}else if(null==t||"boolean"===l)n=H(e,n,r);else{if("function"===l)return f((()=>{let s=t();for(;"function"==typeof s;)s=s();n=L(e,s,n,r)})),()=>n;if(Array.isArray(t)){const l=[],i=n&&Array.isArray(n);if(M(l,t,n,s))return f((()=>n=L(e,l,n,r,!0))),()=>n;if(0===l.length){if(n=H(e,n,r),o)return n}else i?0===n.length?j(e,l,r):function(e,t,n){let r=n.length,s=t.length,l=r,o=0,i=0,a=t[s-1].nextSibling,c=null;for(;o<s||i<l;)if(t[o]!==n[i]){for(;t[s-1]===n[l-1];)s--,l--;if(s===o){const t=l<r?i?n[i-1].nextSibling:n[l-i]:a;for(;i<l;)e.insertBefore(n[i++],t)}else if(l===i)for(;o<s;)c&&c.has(t[o])||t[o].remove(),o++;else if(t[o]===n[l-1]&&n[i]===t[s-1]){const r=t[--s].nextSibling;e.insertBefore(n[i++],t[o++].nextSibling),e.insertBefore(n[--l],r),t[s]=n[l]}else{if(!c){c=new Map;let e=i;for(;e<l;)c.set(n[e],e++)}const r=c.get(t[o]);if(null!=r)if(i<r&&r<l){let a,u=o,d=1;for(;++u<s&&u<l&&null!=(a=c.get(t[u]))&&a===r+d;)d++;if(d>r-i){const s=t[o];for(;i<r;)e.insertBefore(n[i++],s)}else e.replaceChild(n[i++],t[o++])}else o++;else t[o++].remove()}}else o++,i++}(e,n,l):(n&&H(e),j(e,l));n=l}else if(t.nodeType){if(Array.isArray(n)){if(o)return n=H(e,n,r,t);H(e,n,null,t)}else null!=n&&""!==n&&e.firstChild?e.replaceChild(t,e.firstChild):e.appendChild(t);n=t}}return n}function M(e,t,n,r){let s=!1;for(let l=0,o=t.length;l<o;l++){let o,i=t[l],a=n&&n[e.length];if(null==i||!0===i||!1===i);else if("object"==(o=typeof i)&&i.nodeType)e.push(i);else if(Array.isArray(i))s=M(e,i,a)||s;else if("function"===o)if(r){for(;"function"==typeof i;)i=i();s=M(e,Array.isArray(i)?i:[i],Array.isArray(a)?a:[a])||s}else e.push(i),s=!0;else{const t=String(i);a&&3===a.nodeType&&a.data===t?e.push(a):e.push(document.createTextNode(t))}}return s}function j(e,t,n=null){for(let r=0,s=t.length;r<s;r++)e.insertBefore(t[r],n)}function H(e,t,n,r){if(void 0===n)return e.textContent="";const s=r||document.createTextNode("");if(t.length){let r=!1;for(let l=t.length-1;l>=0;l--){const o=t[l];if(s!==o){const t=o.parentNode===e;r||l?t&&o.remove():t?e.replaceChild(s,o):e.insertBefore(s,n)}else r=!0}}else e.insertBefore(s,n);return[s]}var P=k('<header class="flex items-center justify-between mb-8"><div class="flex items-center gap-4"><div class=header-icon><svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"class=nfc-icon><path class=nfc-phone d="M5 2h14a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2z"></path><circle class=nfc-button cx=12 cy=19 r=1></circle><g class=nfc-waves><path d="M8 12h1v5H8z"></path><path d="M10 9h1v8h-1z"></path><path d="M12 11h1v6h-1z"></path><path d="M14 9h1v8h-1z"></path><path d="M16 12h1v5h-1z"></path></g></svg></div><h1 class="text-2xl font-bold">NFC</h1></div><div class="text-sm text-gray"><p>支持 Chrome 89+ 的 Android 设备');function U(){return P()}var q=k('<div class="flex flex-col"><button class="btn btn-primary"></button><div class="input-group mt-4"><label for=writeData class=label>要写入的数据</label><input id=writeData type=text class=input placeholder=请输入要写入的数据></div><button class="btn btn-secondary mt-2">'),z=k("<div class=card><h2 class=card-title>NFC 读写控制"),_=k("<p class=text-error>Web NFC 不支持您的浏览器");function W(e){const[t,n]=d(!0),[r,s]=d(!1),[o,i]=d(!1),[a,c]=d(""),[u,p]=d(null),[h,v]=d(!1);var b;g((()=>{y()})),b=()=>{u()&&(u().onreading=null,u().onerror=null)},null===l||(null===l.cleanups?l.cleanups=[b]:l.cleanups.push(b));const y=async()=>{try{if(!("NDEFReader"in window))throw new Error("Web NFC API 不可用");if(navigator.permissions)try{const e=await navigator.permissions.query({name:"nfc"});v("granted"===e.state),e.onchange=()=>{v("granted"===e.state)}}catch(t){console.warn("权限查询失败:",t)}n(!0),e.onStatus?.("NFC 准备就绪 - 请靠近标签")}catch(r){n(!1),e.onError(m(r))}},m=e=>e instanceof Error?e.message.includes("not available")?"请使用 Chrome 89+ 的 Android 设备":e.message.includes("permission")?"需要 NFC 权限":e.message.includes("ongoing")?"请等待当前扫描完成":e.message:"NFC 操作失败",x=()=>{if(!u())try{const e=new window.NDEFReader;return p(e),e}catch(t){return n(!1),e.onError("Web NFC 不支持您的浏览器"),null}return u()},w=e=>Array.from(new Uint8Array(e)).map((e=>e.toString(16).padStart(2,"0"))).join("").toUpperCase(),S=e=>{try{if("string"==typeof e.data)return e.data;const t=new TextDecoder(e.encoding||"utf-8").decode(e.data);try{return JSON.parse(t)}catch{return t}}catch(t){return w(e.data)}},C=async()=>{if(r())return void e.onError("请等待当前扫描完成");const t=x();if(t){s(!0),e.onStatus?.("正在扫描...");try{t.onreading=null,t.onerror=null,t.onreading=t=>{try{let r=t.serialNumber.replaceAll(":","")||"";const s={serialNumber:t.serialNumber,uid:r,timestamp:(new Date).toISOString(),records:t.message?.records?(n=t.message.records,n.map((e=>({recordType:e.recordType,mediaType:e.mediaType,id:e.id,encoding:e.encoding,lang:e.lang,data:S(e),rawData:w(e.data)})))):[]};if(!r&&t.message?.records?.length>0){const e=t.message.records[0];if(e.data){new DataView(e.data);[4,7,10].includes(e.data.byteLength)&&(r=w(e.data),s.uid=r,console.log("从NDEF记录获取UID:",r))}}r?(e.onRead(r,s),e.onStatus?.(`已读取UID: ${r}`),console.log("NFC完整信息:",s)):e.onError("未检测到卡号UID")}catch(r){e.onError("解析UID失败")}finally{s(!1)}var n},t.onerror=t=>{e.onError(`扫描错误: ${t.message}`),s(!1)},await t.scan()}catch(n){e.onError(n instanceof Error?n.message:String(n)),s(!1)}}},A=async()=>{const t=x();if(t)if(a()){i(!0),e.onStatus?.("正在写入...");try{await t.write({records:[{recordType:"text",data:a()}]}),e.onWrite(a()),e.onStatus?.("写入成功")}catch(n){e.onError(n instanceof Error?n.message:String(n))}finally{i(!1)}}else e.onError("请输入要写入的数据")};return(N=z()).firstChild,O(N,$(T,{get when(){return t()},get fallback(){return _()},get children(){var e=q(),t=e.firstChild,n=t.nextSibling,s=n.firstChild.nextSibling,l=n.nextSibling;return t.$$click=C,O(t,(()=>r()?"扫描中...":"扫描 NFC 标签")),s.$$input=e=>c(e.currentTarget.value),l.$$click=A,O(l,(()=>o()?"写入中...":"写入 NFC 标签")),f((e=>{var n=r(),s=o()||!a();return n!==e.e&&(t.disabled=e.e=n),s!==e.t&&(l.disabled=e.t=s),e}),{e:void 0,t:void 0}),f((()=>s.value=a())),e}}),null),N;var N}function R(e){return parseInt(e,16).toString()}function J(e){return parseInt(e).toString(16).toUpperCase()}function V(e){let t="";for(let n=e.length-2;n>=0;n-=2)t+=e.substr(n,2);return t}function G(e){return R(V(J(e)))}function K(e,t){switch(t){case"hex":default:return e;case"dec":return R(e);case"reversedHex":return V(e);case"reversedDec":return G(R(e))}}I(["click","input"]);var X=k('<button class="btn btn-sm btn-outline">'),Q=k('<div class="text-error mb-4">'),Y=k('<div class="text-sm mb-4">上一次操作: <span class=text-success>'),Z=k('<div class="mt-4 p-4 bg-gray-100 rounded"><h3 class="font-bold mb-2">NFC 详细信息</h3><pre class="text-xs overflow-auto max-h-60">'),ee=k('<div class=card><div class="flex justify-between items-center"><h2 class=card-title>卡片信息</h2></div><div class=input-group><label class=label>uid (原始)</label><input type=text class=input readonly></div><div class=input-group><label class=label>uid (10进制)</label><input type=text class=input readonly></div><div class=input-group><label class=label>uid (反转10进制)</label><input type=text class=input readonly>');function te(e){const[t,n]=d(!1);return(()=>{var r=ee(),s=r.firstChild;s.firstChild;var l=s.nextSibling,o=l.firstChild.nextSibling,i=l.nextSibling,a=i.firstChild.nextSibling,c=i.nextSibling.firstChild.nextSibling;return O(s,$(T,{get when(){return e.nfcInfo},get children(){var e=X();return e.$$click=()=>n(!t()),O(e,(()=>t()?"隐藏信息":"更多信息")),e}}),null),O(r,$(T,{get when(){return e.error},get children(){var t=Q();return O(t,(()=>e.error)),t}}),l),O(r,$(T,{get when(){return e.lastAction},get children(){var t=Y();return O(t.firstChild.nextSibling,(()=>e.lastAction)),t}}),l),O(r,$(T,{get when(){return t()&&e.nfcInfo},get children(){var t=Z();return O(t.firstChild.nextSibling,(()=>JSON.stringify(e.nfcInfo,null,2))),t}}),null),f((()=>o.value=e.cardData||"无数据可用")),f((()=>a.value=e.cardData?K(e.cardData,"dec"):"无数据可用")),f((()=>c.value=e.cardData?K(e.cardData,"reversedDec"):"无数据可用")),r})()}I(["click"]);var ne=k('<div class=card><h2 class=card-title>格式转换</h2><div class="flex flex-col"><div class=input-group><label class=label>输入值</label><input type=text class=input placeholder=请输入要转换的值></div><div class="flex gap-4"><div class="input-group flex-1"><label class=label>输入格式</label><select class=input><option value=hex>16进制</option><option value=dec>10进制</option><option value=reversedHex>反转16进制</option><option value=reversedDec>反转10进制</option></select></div><div class="input-group flex-1"><label class=label>输出格式</label><select class=input><option value=hex>16进制</option><option value=dec>10进制</option><option value=reversedHex>反转16进制</option><option value=reversedDec>反转10进制</option></select></div></div><div class="input-group mt-4"><label class=label>转换后的值</label><input type=text class=input readonly>');function re(){const[e,t]=d(""),[n,r]=d("hex"),[s,l]=d("dec");return o=ne(),i=o.firstChild.nextSibling.firstChild,a=i.firstChild.nextSibling,c=i.nextSibling,u=c.firstChild,p=u.firstChild.nextSibling,h=u.nextSibling.firstChild.nextSibling,g=c.nextSibling.firstChild.nextSibling,a.$$input=e=>t(e.currentTarget.value),p.addEventListener("change",(e=>r(e.currentTarget.value))),h.addEventListener("change",(e=>l(e.currentTarget.value))),f((()=>a.value=e())),f((()=>p.value=n())),f((()=>h.value=s())),f((()=>g.value=(()=>{if(!e())return"";try{let t=e();switch("dec"===n()?t=J(e()):"reversedHex"===n()?t=V(e()):"reversedDec"===n()&&(t=J(G(e()))),s()){case"hex":default:return t;case"dec":return R(t);case"reversedHex":return V(t);case"reversedDec":return G(R(t))}}catch(t){return"Invalid input"}})())),o;var o,i,a,c,u,p,h,g}I(["input"]);var se=k('<div class=container><div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div></div><div>');function le(){const[e,t]=d(""),[n,r]=d(""),[s,l]=d(""),o=e=>{t(e),console.log(e),r("标签读取成功"),l("")},i=e=>{t(e),r("标签写入成功"),l("")},a=e=>{l(e),r("")};return c=se(),u=c.firstChild,f=u.firstChild,p=f.nextSibling,O(c,$(U,{}),u),O(f,$(W,{onRead:o,onWrite:i,onError:a}),null),O(f,$(te,{get cardData(){return e()},get lastAction(){return n()},get error(){return s()}}),null),O(p,$(re,{})),c;var c,u,f,p}!function(e,t,n,r={}){let o;(function(e,t){const n=i,r=l,o=0===e.length,a=void 0===t?r:t,c=o?s:{owned:null,cleanups:null,context:a?a.context:null,owner:a},u=o?e:()=>e((()=>h((()=>E(c)))));l=c,i=null;try{return w(u,!0)}finally{i=n,l=r}})((r=>{o=r,t===document?e():O(t,e(),t.firstChild?null:void 0,n)}),r.owner)}((()=>$(le,{})),document.getElementById("root"));
